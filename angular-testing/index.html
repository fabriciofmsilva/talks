<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
        <section data-markdown>
          <textarea data-template>
          # Teste em Angular

          [Fabrício Silva - @fabriciofmsilva](https://github.com/fabriciofmsilva)

          Note:
          Bla
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          1. Agenda
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Principais desculpas
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Fazer testes levam muito tempo e esforço
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # O tempo gasto poderia ser usado para criar novas _features_
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # É dificil mensurar e provar o retorno para negócio
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Principais perguntas
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # O que devo testar?
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Quando eu testo?
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Eu preciso de 100% de cobertura (_coverage_)?
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Quantos testes são o suficiente?
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Por que automatizar os testes?

          * Humanos são ruins para tarefas repetitivas
          * Computadores são bons nisso!
          * Testes regressivos "rodam" mais rápidos
          * Facilita a integração
          * Improve the design of implementations
          * Allows refactoring
          * Add new features without breaking anything
          * Tests are good documentation
          * Tests make developers more confident about their work
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Teste em camadas

          * Estático (Static)
          * Unidade (Unit)
          * Integração (Integration)
          * Ponta a ponta (End to End)
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Pirâmide de testes

          Imagem da pirâmide
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Troféu de testes

          Imagem do troféu
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Include 3 parts in each test name

          1. What is being tested? For example, the ProductsService.addNewProduct method
          2. Under what circumstances and scenario? For example, no price is passed to the method
          3. What is the expected result? For example, the new product is not approved
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          ```javascript
          // 1. unit under test
          describe('Products Service', function() {
            describe('Add new product', function() {
              // 2. scenario and 3. expectation
              it('When no price is specified, then the product status is pending approval', ()=> {
                const newProduct = new ProductService().add(...);
                expect(newProduct.status).to.equal('pendingApproval');
              });
            });
          });
          ```
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Structure tests by the AAA pattern

          1. A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects and any other preparation code
          2. A - Act: Execute the unit under test. Usually 1 line of code
          3. A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          Bad

          ```javascript
          test('Should be classified as premium', () => {
              const customerToClassify = {spent:505, joined: new Date(), id:1}
              const DBStub = sinon.stub(dataAccess, "getCustomer")
                  .reply({id:1, classification: 'regular'});
              const receivedClassification = customerClassifier.classifyCustomer(customerToClassify);
              expect(receivedClassification).toMatch('premium');
          });
          ```
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          Good

          ```javascript
          describe('Customer classifier', () => {
              test('When customer spent more than 500$, should be classified as premium', () => {
                  //Arrange
                  const customerToClassify = {spent:505, joined: new Date(), id:1}
                  const DBStub = sinon.stub(dataAccess, "getCustomer")
                      .reply({id:1, classification: 'regular'});
                  //Act
                  const receivedClassification = customerClassifier.classifyCustomer(customerToClassify);
                  //Assert
                  expect(receivedClassification).toMatch('premium');
              });
          });
          ```
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # TDD
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # BDD
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          Bad

          ```javascript
          test("When asking for an admin, ensure only ordered admins in results" , () => {
              //assuming we've added here two admins "admin1", "admin2" and "user1"
              const allAdmins = getUsers({adminOnly:true});
              const admin1Found, adming2Found = false;
              allAdmins.forEach(aSingleUser => {
                  if(aSingleUser === "user1"){
                      assert.notEqual(aSingleUser, "user1", "A user was found and not admin");
                  }
                  if(aSingleUser==="admin1"){
                      admin1Found = true;
                  }
                  if(aSingleUser==="admin2"){
                      admin2Found = true;
                  }
              });

              if(!admin1Found || !admin2Found ){
                  throw new Error("Not all admins were returned");
              }
          });
          ```
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          Good

          ```javascript
          it("When asking for an admin, ensure only ordered admins in results" , () => {
              //assuming we've added here two admins
              const allAdmins = getUsers({adminOnly:true});

              expect(allAdmins).to.include.ordered.members(["admin1" , "admin2"])
            .but.not.include.ordered.members(["user1"]);
          });
          ```
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Fundamentals of Testing in Angular

          Jasmine

          Karma

          ChromeHeadless

          TestBed

          Testando serviços

          HttpClientTestingModule

          Testando componentes

          Component class testing

          Component DOM testing
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Static Analysis Testing Angular Applications

          TypeScript

          Lint

          Format Code
          </textarea>
          </section>

          <section data-markdown>
          <textarea data-template>
          # Mocking Fundamentals
          </textarea>
          </section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				]
			});
		</script>
	</body>
</html>
