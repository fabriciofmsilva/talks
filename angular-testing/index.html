<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Teste com Angular</title>

  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/reveal.css">
  <link rel="stylesheet" href="../css/theme/my-theme.css">

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="../lib/css/monokai.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? '../css/print/pdf.css' : '../css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>
</head>

<body>
  <div class="reveal">
    <div class="slides theme-itau">
      <section class="text-center" data-markdown data-background-color="#f47920">
        <textarea data-template>
            # Teste com Angular
          </textarea>
      </section>

      <section
        data-markdown
        data-background-color="#fff"
        data-background-image="../images/dog-sunglass.gif"
        data-background-size="cover">>
        <textarea data-template>
          <p class="box">Fabrício Silva</p>
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          1. <del>des</del>Motivações
          2. Um pouco de teoria
          4. Ferramentas
          3. Algumas boas práticas
          5. Testando no Angular
          </textarea>
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Algumas desculpas
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/trex.webp"
        data-background-size="cover">
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #1 Desculpa
          Fazer testes levam muito tempo e esforço.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #2 Desculpa
          O tempo gasto poderia ser usado para criar novas _features_.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #3 Desculpa
          É dificil mensurar/provar retorno para negócio.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #4 Desculpa
          Fazer teste é difícil.

          Note:
          1. Curva de aprendizado
        </textarea>
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Algumas dúvidas
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/know-nothing.gif"
        data-background-size="cover">
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #1 Dúvida
          O que devo testar?
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #2 Dúvida
          Quando eu testo?
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #3 Dúvida
          Eu preciso de 100% de cobertura (_coverage_)?
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #4 Dúvida
          Quantos testes são o suficiente?
        </textarea>
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Por que automatizar os testes?
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/car-testing.gif"
        data-background-size="cover">
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testes automatizados
          Melhoram o design das implementações.

          Note:
          1. Não é desenvolvido código desnecessário
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testes automatizados
          Facilitam a refatoração.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testes automatizados
          Facilitam a adição de novas features.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testes automatizados
          São uma boa documentação.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testes automatizados
          Reduzem o tempo gasto com _debug_ e correção de _bugs_.

          Note:
          1. Evita alterar a regra e criar um novo bug
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testes automatizados
          Auxiliam testes de regressão.
        </textarea>
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Teste em camadas
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Estático
          Para capturar erros de digitação e sintaxe.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Unidade
          Verifica se peças isoladas e individuais funcionam conforme o esperado.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Integração
          Verifica se as unidades trabalham juntas em harmonia.
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/unit-integration.webp"
        data-background-size="cover">
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Ponta a ponta
          Verifica se o sistema funciona corretamente. Simulando como se fosse um usuário clicando, digitando, etc.

          Note:
          1. Testes funcionais ou e2e
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          # Pirâmide de testes
        </textarea>
      </section>

      <section
        data-background-image="../images/test-pyramid.png"
        data-background-size="50%">
      </section>

      <section data-markdown>
        <textarea data-template>
          # Troféu de testes
        </textarea>
      </section>

      <section
        data-background-image="../images/testing-trophy.png"
        data-background-size="30%">
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Ferramentas
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/tools.webp"
        data-background-size="cover">
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Karma](../images/karma.png)

          Note:
          1. Lançador
        </textarea>
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Jasmine](../images/jasmine.svg)

          Note:
          1. Lançador
          2. Estrutura
          3. Asserção
        </textarea>
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Jest](../images/jest.svg)

          Note:
          1. Lançador
          2. Estrutura
          3. Asserção
          4. Snapshot
          5. Cobertura
        </textarea>
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Mocha](../images/mocha.svg)

          Note:
          1. Estrutura
          2. Asserção
        </textarea>
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Chai](../images/chai.png)

          Note:
          1. Asserção
        </textarea>
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Sinon](../images/sinon.jpg)

          Note:
          1. Mocks, spies e stubs
        </textarea>
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Istanbul](../images/istanbul.png)

          Note:
          1. Cobertura
        </textarea>
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Istanbul](../images/protractor.png)

          Note:
          1. Cobertura
        </textarea>
      </section>

      <section class="images" data-markdown>
        <textarea data-template>
          ![Istanbul](../images/cypress.webp)

          Note:
          1. Cobertura
        </textarea>
      </section>

      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Conceitos básicos
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Suite
          Função que agrupa os testes.

          `describe(string, function)`
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Spec
          Função com o caso de teste, deve conter pelo menos uma asserção.

          `it(string, function)`
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Expectations
          São asserções avaliadas como verdadeiras ou falsas.

          `expect(actual).toBe(expected)`
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Matcher
          São ajudantes predefinidos para afirmações comuns.

          `toBe(expected)` `toEqual(expected)`
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Setup e teardown
          Funções que ajudam a configurar os testes.

          `beforeEach(function)`, `afterEach(function)`

          `beforeAll(function)`, `afterAll(function)`
        </textarea>
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Mocking
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/wrestling.gif"
        data-background-size="cover">
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Spies
          Forneçe informações sobre funções.

          Por exemplo, quantas vezes elas foram chamadas, em quais casos e por quem?
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Stubbing ou dubbing
          Substitui os métodos dos módulos pelas funções fornecidas pelo usuário para garantir o comportamento esperado durante o teste.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Mocks ou Fakes
          São usados para falsificar determinados módulos ou comportamentos para testar diferentes partes de um processo.
        </textarea>
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Rodando os testes
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## No browser
        </textarea>
      </section>

      <section data-markdown
        data-background-image="../images/jasmine.png"
        data-background-size="contain">
        <textarea data-template>
          Note:
          1. Jasmine
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## No terminal com Node.js
        </textarea>
      </section>

      <section data-markdown
        data-background-image="../images/karma-mocha.png"
        data-background-size="contain">
        <textarea data-template>
          Note:
          1. Karma + mocha
        </textarea>
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Boas práticas
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/good.gif"
        data-background-size="cover">
      </section>

      <section data-markdown>
        <textarea data-template>
          # TDD
          Test Driven Development.

          Note:
          1. Kent Beck
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Red
          Escreva um teste que falha.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Green
          Escreva um código que faz o teste passar.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Refactor
          Refatore o código eliminando redundância.
        </textarea>
      </section>

      <section
        data-background-image="../images/tdd.png"
        data-background-size="30%">
      </section>

      <section data-markdown>
        <textarea data-template>
          # BDD
          Behaviour Driven Development.

          Note:
          1. Dan North
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          Cenário: [ Nome ]

          Dado que [ Estado inicial do sistema ]

          Quando [ Ação a ser realizada no sistema ]

          Então [ Coisas que o sistema deve fazer após a ação do Quando ]
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### Exemplo
          ```javascript
          it('When asking for an admin, ensure only ordered admins in results' , () => {
            //assuming we've added here two admins
            const allAdmins = getUsers({ adminOnly: true });

            expect(allAdmins).to.include.ordered.members(['admin1' , 'admin2'])
              .but.not.include.ordered.members(['user1']);
          });
          ```
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          # Nomeando
          Um bom nome de teste deve incluir 3 partes.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #1 O que está sendo testado?
          Por exemplo, a função `ProductsService.addNewProduct`.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #2 Sob quais circunstâncias / cenário?
          Por exemplo, nenhum preço foi passado para a função.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #3 Qual é o resultado esperado?
          Por exemplo, o produto não foi aprovado.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### Exemplo
          ```javascript
          // 1. unit under test
          describe('Products Service', function() {
            describe('Add new product', function() {
              // 2. scenario and 3. expectation
              it('When no price is specified, then the product status is pending approval', ()=> {
                const newProduct = new ProductService().add(...);
                expect(newProduct.status).to.equal('pendingApproval');
              });
            });
          });
          ```
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          # Padrão AAA
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #1 Arrange
          Todo o código de configuração para levar o sistema ao cenário que o teste pretende simular.

          Note:
          1. Isso pode incluir instanciar a unidade sob o construtor de teste, adicionar registros de banco de dados, mocking/stubbing de objetos e qualquer outro código de preparação
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #2 Act
          Execute a unidade em teste.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #3 Assert
          Garanta que o valor recebido satisfaça a expectativa.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### Exemplo
          <pre class="javascript"><code data-line-numbers="2-5,7-9,11-12">test('When customer spent more than 500$, should be classified as premium', () => {
            // Arrange
            const customerToClassify = { spent:505, joined: new Date(), id:1 }
            const DBStub = sinon.stub(dataAccess, 'getCustomer')
              .reply({id:1, classification: 'regular'});

            // Act
            const receivedClassification = customerClassifier
              .classifyCustomer(customerToClassify);

            // Assert
            expect(receivedClassification).toMatch('premium');
          });</code></pre>
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Black-box
          Teste apenas os métodos públicos.

          Note:
          Pode haver excessões
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Data
          Prefira usar dados mais próximos dos reais.
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/faker.png"
        data-background-size="cover">
        <p class="box"><a href="https://github.com/Marak/Faker.js">faker.js</a></p>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Coverage
          Tenha o suficiente para estar confiante, algo em torno de 80% fica ótimo.

          Note:
          Coverage is a measure of how many code lines (and branches, statements, etc) are being reached by the tests
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/coverage-terminal.jpeg"
        data-background-size="contain">
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Áreas não cobertas
          Verifique os relatório de _coverage_ para identificar partes importantes que não foram testadas.
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/coverage-lines.png"
        data-background-size="contain">
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Teste com Angular
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/power-plug.gif"
        data-background-size="cover">
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Setup padrão
          Jasmine + Karma + Chrome
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## TestBed
          Configura e inicializa o ambiente para teste de unidade e fornece métodos para criar componentes e serviços em testes de unidade.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### #1 Exemplo
          <pre class="javascript"><code data-line-numbers>let service: ValueService;

          beforeEach(() => {
            TestBed.configureTestingModule({
              providers: [ ValueService ]
            });
            service = TestBed.get(ValueService);
          });

          it('should use ValueService', () => {
            expect(service.getValue()).toBe('real value');
          });</code></pre>
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### #2 Exemplo
          <pre class="javascript"><code data-line-numbers>beforeEach(() => {
            TestBed.configureTestingModule({
              declarations: [ WelcomeComponent ],
              providers: [
                { provide: UserService, useClass: MockUserService }
              ]
            });

            comp = TestBed.get(WelcomeComponent);
            userService = TestBed.get(UserService);
          });
          </code></pre>

          Note:
          1. provide the component-under-test and dependent service
          2. inject both the component and the dependent service.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testando componentes
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Teste isolado (Isolated)
          São usados para testar uma unidade isoladamente.

          As dependências externas devem ser "mockadas".

          Note:
          1. Testes isolados são usados para testar uma unidade isoladamente.
          2. A unidade pode conter alguma lógica de negócios que precisa ser testada isoladamente.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### #1 Exemplo
          <pre class="javascript"><code data-line-numbers>it('should fire a change event after 200 millis', fakeAsync(() => {
            const component = new FiltersCmp((v) => v);

            const events = [];
            component.change.subscribe(v => events.push(v));

            component.filters.controls['title'].setValue('N');
            setTimeout(() => { component.filters.controls['title'].setValue('Ne'); }, 150);
            setTimeout(() => { component.filters.controls['title'].setValue('New'); }, 200);

            expect(events).toEqual([]);

            tick(1000);

            expect(events).toEqual([
              {title: 'New', speaker: null, highRating: false}
            ]);

            component.filters.controls['title'].setValue('New!');

            tick(1000);

            expect(events).toEqual([
              {title: 'New', speaker: null, highRating: false},
              {title: 'New!', speaker: null, highRating: false}
            ]);
          }));</code></pre>
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Teste raso (Shallow)

          Não renderiza os componentes filhos, configurando o esquema como `NO_ERRORS_SCHEMA`.

          Note:
          1. Isso ignorará tags desconhecidas
          2. Não precisamos importar os componentes filhos
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### #1 Exemplo
          <pre class="javascript"><code data-line-numbers>beforeEach(async(() => {
            TestBed.configureTestingModule({
              declarations: [ TalksCmp ],
              schemas: [ NO_ERRORS_SCHEMA ]
            }).compileComponents();
          }));

          beforeEach(() => {
            fixture = TestBed.createComponent(TalksCmp);
            component = fixture.componentInstance;
            fixture.detectChanges();
          });

          it('should render a list of talks', () => {
            component.talks = < any>[ { title: 'Are we there yet?' }, { title: 'The Value of Values' } ];
            fixture.detectChanges();

            const s = fixture.debugElement.nativeElement;
            const ts = s.querySelectorAll('talk-cmp');

            expect(ts.length).toEqual(2);
            expect(ts[0].talk.title).toEqual('Are we there yet?');
            expect(ts[1].talk.title).toEqual('The Value of Values');
          });</code></pre>

          Note:
          1. debugElement; // test helper
          2. componentInstance; // to access properties and methods
          3. nativeElement; // to access DOM element
          4. detectChanges(); // trigger component change detection
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Teste de integração (Integration)
          Quando você testa dois ou mais componentes juntos.

          Faz sentido quando quer tester um componente conteiner renderizando um componente de UI.

          Note:
          1. Importa a implementação das dependências da unidade em teste, mesmo que ainda deva mockar do HTTPClient.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### #1 Exemplo
          <pre class="javascript"><code data-line-numbers>beforeEach(async(() => {
            TestBed.configureTestingModule({
              imports: [AppModule]
            }).compileComponents();
          }));

          beforeEach(() => {
            fixture = TestBed.createComponent(AppCmp);
            component = fixture.componentInstance;
            fixture.detectChanges();
            el = fixture.debugElement.nativeElement;
          });

          it('should filter talks by title', async(inject([App], (app: App) => {
            app.model.talks = [ ... ];
            fixture.detectChanges();

            expect(el.innerHTML).toContain("Are we there yet?");
            expect(el.innerHTML).toContain("The Value of Values");

            component.handleFiltersChange({ title: 'we', speaker: null, minRating: 0 });
            fixture.detectChanges();

            expect(el.innerHTML).toContain("Are we there yet?");
            expect(el.innerHTML).not.toContain("The Value of Values");
          })));</code></pre>
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testando serviços
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### #1 Exemplo
          <pre class="javascript"><code data-line-numbers>describe('ValueService', () => {
            let service: ValueService;
            beforeEach(() => { service = new ValueService(); });

            it('#getValue should return real value', () => {
              expect(service.getValue()).toBe('real value');
            });

            it('#getObservableValue should return value from observable', (done: DoneFn) => {
              service.getObservableValue().subscribe(value => {
                expect(value).toBe('observable value');
                done();
              });
            });
          });</code></pre>
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## HttpClientTestingModule
          Testando serviços que usam o módulo HTTP.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### #1 Exemplo
          <pre class="javascript"><code data-line-numbers>beforeEach(() => {
            TestBed.configureTestingModule({
              imports: [ HttpClientTestingModule ]
            });

            httpClient = TestBed.get(HttpClient);
            httpTestingController = TestBed.get(HttpTestingController);
          });

          it('can test HttpClient.get', () => {
            const testData: Data = {name: 'Test Data'};

            httpClient.get< Data >(testUrl)
              .subscribe(data =>
                expect(data).toEqual(testData)
              );

            const req = httpTestingController.expectOne('/data');

            expect(req.request.method).toEqual('GET');

            req.flush(testData);

            httpTestingController.verify();
          });</code></pre>
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          # spectator
          Simplifica os testes com Angular.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          #### Componente
          <pre class="javascript"><code data-line-numbers>import { Spectator, createComponentFactory } from '@ngneat/spectator';
          import { ButtonComponent } from './button.component';

          describe('ButtonComponent', () => {
            let spectator: Spectator< ButtonComponent >;
            const createComponent = createComponentFactory(ButtonComponent);

            beforeEach(() => spectator = createComponent());

            it('should have a success class by default', () => {
              expect(spectator.query('button')).toHaveClass('success');
            });

            it('should set the class name according to the [className] input', () => {
              spectator.setInput('className', 'danger');
              expect(spectator.query('button')).toHaveClass('danger');
              expect(spectator.query('button')).not.toHaveClass('success');
            });
          });</code></pre>
        </textarea>
      </section>


      <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Angular + Jest
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          # Vantagens
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #1 Vantagem
          Karma é "lento" para rodar os testes.

          Jest é mais rápido pois usa Node.js + jsdom.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #2 Vantagem
          A CLI do Jest é mais inteligente.

          Note:
          1. CLI: filtros por arquivo
          2. Roda apenas os testes que falharam
        </textarea>
      </section>

      <!-- <section data-markdown>
          <textarea data-template>
            # Vantagens
            Executing tests without building the whole app allows to run our tests faster
            Low configuration needed to get started
            Clear documentation which makes it easy to adjust Jest to your needs
            Testing is stable: no more sudden test runner failures while writing tests
            You can keep most of the Jasmine syntax because Jest includes most of the Jasmine API in addition to its own API
            More active community which will make Jest even better
            Snapshot testing, a useful feature which is not available in Jasmine
          </textarea>
        </section> -->

      <section data-markdown>
        <textarea data-template>
          # Desvantagens
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #1 Desvantagem
          O teste não roda em um _browser_ real.

          Note:
          1. O pessoal do Angular usa o Karma por esse motivo.
          2. Mesmo assim é possível rodar em um navegador real.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #2 Desvantagem
          Não precisa de configurações extras (no caso do Angular).

          Note:
          1. Já vem instalado na CLI
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          # Configurando
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #1 Configurando
          Criar um projeto **Angular**, se ainda não criou um.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #2 Configurando
          Instalar o **Jest** e o **typings**.

          `npm install jest @types/jest --only=dev`
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #3 Configurando
          Instalar o pacote que ajuda o **Jest** trabalhar no ambiente **Angular**.

          `npm install jest-preset-angular`
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #4 Configurando
          Adicionar a configuração do Jest no arquivo `jest.config.js`.

          Também é possível adicionar no `package.json`.

          Note:
          1. Prefiro o jest.config, mais configurável
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #5 Configurando
          Alterar o script de test para usar o Jest ao invés do `ng test`.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #6 Configurando
          Remover o **Jasmine** e o **typings**.

          `npm uninstall jasmine @types/jasmine`
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## #7 Configurando
          Remover o **Karma**, os pacotes relacionados e o arquivo `test.ts`.
        </textarea>
      </section>


      <!-- <section data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Testando Angular com Jest
        </textarea>
      </section> -->



      <!-- <section data-markdown data-background-color="#f47920">
          <textarea data-template>
            # Angular + Cypress
          </textarea>
        </section> -->

        <!-- <section data-markdown>
          <textarea data-template>
            # Outros tópicos
            ## Acessibilidade
            ## Performance Budget
          </textarea>
        </section> -->

      <section class="invert" data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Recapitulando
        </textarea>
      </section>

      <section
        data-background-color="#fff"
        data-background-image="../images/walkman.webp"
        data-background-size="cover">
      </section>


      <section data-markdown>
        <textarea data-template>
          ## Desculpas
          Fazer teste não é díficil e muitas ferramentas facilitam.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Dúvidas
          Teste o que for importante e mantenha o _coverage_ no combinado.

          Note:
          1. Importante: Regras de negócio
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Testes Automatizados
          Facilitam a regressão, refatorações e adição de novas _features_v.
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ## Boas práticas
          Procure fazer os testes antes (_test first_) e manter as boas práticas.
        </textarea>
      </section>

      <section class="invert" data-markdown data-background-color="#f47920">
        <textarea data-template>
          # Obrigado.
          [@fabriciofmsilva](https://fabriciofmsilva.com.br)
        </textarea>
      </section>

      <section data-markdown>
        <textarea data-template>
          ### Referências
          * [Angular Docs   - Testing](https://angular.io/guide/testing)
          * [Learn the smart, efficient way to test any JavaScript application](https://testingjavascript.com/)
          * [An Overview of JavaScript Testing in 2019](https://medium.com/welldone-software/an-overview-of-javascript-testing-in-2019-264e19514d0a)
          * [JavaScript & Node.js Testing Best Practices](https://github.com/goldbergyoni/javascript-testing-best-practices)
          * [How to use Jest in Angular aka make unit testing great (again)](https://itnext.io/how-to-use-jest-in-angular-aka-make-unit-testing-great-again-e4be2d2e92d1)
          * [Essential Angular: Testing](https://blog.nrwl.io/essential-angular-testing-192315f8be9b#.undqs5icx)
          * [Angular — Testing Guide (v4+)](https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0)
        </textarea>
      </section>
    </div>
  </div>

  <script src="../js/reveal.js"></script>

  <script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
      dependencies: [
        {
          src: '../plugin/markdown/marked.js'
        },
        {
          src: '../plugin/markdown/markdown.js'
        },
        {
          src: '../plugin/notes/notes.js',
          async: true
        },
        {
          src: '../plugin/highlight/highlight.js',
          async: true
        }
      ],
      transition: 'fade',
      width: 1280,
      height: 720,
      hash: true,
      controls: false,
      progress: false,
    });
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-22890269-1"></script>
  <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-22890269-1');</script>
</body>
</html>
